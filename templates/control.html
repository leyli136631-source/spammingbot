<!DOCTYPE html>
<html>
<head>
    <title>Instagram Bot Control Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function refreshLogs() {
            fetch("/logs")
                .then(response => response.json())
                .then(data => {
                    let logDiv = document.getElementById("log_area");
                    logDiv.innerHTML = "";
                    data.forEach(line => {
                        let p = document.createElement("p");
                        p.textContent = line;
                        logDiv.appendChild(p);
                    });
                });
        }
        setInterval(refreshLogs, 1000); // update logs every second
    </script>
</head>
<body class="bg-light">
<div class="container py-5">
    <div class="card shadow-lg p-4 rounded-4">
        <h2 class="mb-4">üì° Instagram Bot Control Panel</h2>

        <form method="POST" class="mb-3">
            <div class="mb-3">
                <label class="form-label">Select Chat</label>
                <select name="recipient" class="form-select" required>
                    {% for value, name in chats %}
                        <option value="{{ value }}">{{ name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Type your Message (or Code)</label>
                <textarea name="message" class="form-control" placeholder="Type message here" rows="4" required></textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Delay (seconds)</label>
                <input type="number" name="delay" class="form-control" value="0.5" min="0" step="0.1" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Threads (speed)</label>
                <input type="number" name="threads_count" class="form-control" value="3" min="1" max="10" required>
            </div>

            <button type="submit" class="btn btn-success">Start Sending</button>
            <a href="/stop" class="btn btn-danger">Stop</a>
        </form>

        <div class="mt-4">
            <h5>üìù Logs:</h5>
            <div id="log_area" style="background:#f8f9fa; padding:10px; height:200px; overflow:auto; border:1px solid #ccc;"></div>
        </div>
    </div>
</div>
</body>
</html>
